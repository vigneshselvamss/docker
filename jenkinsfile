def remote = [:]
remote.name = 'docker'
remote.host = '34.213.160.111'
remote.user = 'newuser'
remote.password = 'password'
remote.allowAnyHosts = true
pipeline {
    agent any
    stages {
        stage('Docker-Build') {
            steps {
                sh 'sudo docker build -t vicky12345/docker:nginx .'
                sh 'sudo docker push vicky12345/docker:nginx'
            }
        }
        stage('Cleanup') {
            steps {
                sh 'sudo docker system prune --all -f'
            }
        }
        stage('Remote SSH') {
            steps {
                sshCommand remote: remote, command: "ls -lrt"
            }
        }
    }
}
